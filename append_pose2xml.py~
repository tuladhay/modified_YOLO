from os import listdir
from os.path import isfile, join
import xml.etree.ElementTree as ET
import numpy as np

'''
This is a pre
'''

path = '../airplane_annotation_custom/'
onlyfiles = [f for f in listdir(path) if isfile(join(path, f))]
files = []

# Put all valid filenames in files list
for f in onlyfiles:
    if '~' not in f:
        files.append(f)

for filename in files:
    filename = path + filename

    tree = ET.parse(filename)
    root = tree.getroot()

    for obj in root.iter('object'):
        if obj[0].text == 'CargoDoor':
            x = ET.SubElement(obj, 'pose_x')
            y = ET.SubElement(obj, 'pose_y')
            z = ET.SubElement(obj, 'pose_z')

    ''' Need to get pose data from csv file'''
    pose_x_from_csv = np.random.uniform(0, 10)
    pose_y_from_csv = np.random.uniform(2, 15)
    pose_z_from_csv = np.random.uniform(0, 0.5)

    for obj in root.iter('object'):
        if obj[0].text == 'CargoDoor':
            obj[5].text = str(pose_x_from_csv)  # pose_x
            obj[6].text = str(pose_y_from_csv)  # pose_y
            obj[7].text = str(pose_z_from_csv)  # pose_z

    tree.write(filename)
